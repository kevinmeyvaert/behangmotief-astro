---
import BaseLightbox, { type LightboxImage } from './BaseLightbox.astro';
import { ImageUrlBuilder } from '@/lib/image-url-builder';

interface Props {
  images: Array<{
    id: string;
    blurhash: string;
    hires: string;
    dimensions?: {
      width: number;
      height: number;
    };
  }>;
  artistName: string;
  venueName: string;
}

const { images, artistName, venueName } = Astro.props;

// Transform images for the lightbox
const lightboxImages: LightboxImage[] = images.map(image => ({
  id: image.id,
  url: ImageUrlBuilder.hero(image.hires),
  alt: `${artistName} at ${venueName}`,
  blurhash: image.blurhash,
  width: image.dimensions?.width,
  height: image.dimensions?.height,
}));
---

<div class="album-lightbox">
  <BaseLightbox
    images={lightboxImages}
    enableNavigation={true}
    enableUrlParams={true}
    triggerSelector="[data-album-image-trigger]"
    className="album"
  />
</div>